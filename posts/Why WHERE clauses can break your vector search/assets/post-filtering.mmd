%%{init: {'theme': 'base', 'themeVariables': {'fontFamily': 'Helvetica Neue,Helvetica,Arial,sans-serif', 'fontSize': '14px', 'lineColor': '#64748b', 'textColor': '#0f172a'}}}%%
flowchart TB
  q["Query K=5"]

  subgraph step1["HNSW Top-K Results"]
    r1["#1 Sony"] ~~~ r2["#2 Samsung"] ~~~ r3["#3 Apple"] ~~~ r4["#4 JBL"] ~~~ r5["#5 Bose"]
  end

  f["Filter: brand = Apple or Google"]

  keep["Returned: Apple"]

  q --> step1 --> f --> keep

  style q fill:#f8fafc,stroke:#cbd5e1,stroke-width:2px
  style step1 fill:#f8fafc,stroke:#cbd5e1,stroke-width:2px
  style f fill:#faf5ff,stroke:#cbd5e1,stroke-width:2px
  style r1 fill:#f5f5f5,stroke:#9ca3af,stroke-width:2px
  style r2 fill:#f5f5f5,stroke:#9ca3af,stroke-width:2px
  style r3 fill:#bbf7d0,stroke:#15803d,stroke-width:2px
  style r4 fill:#f5f5f5,stroke:#9ca3af,stroke-width:2px
  style r5 fill:#f5f5f5,stroke:#9ca3af,stroke-width:2px
  style keep fill:#bbf7d0,stroke:#15803d,stroke-width:2px
