<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 550">
  <defs>
    <linearGradient id="laptopGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#3b82f6"/>
      <stop offset="100%" style="stop-color:#2563eb"/>
    </linearGradient>
    <linearGradient id="phoneGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#10b981"/>
      <stop offset="100%" style="stop-color:#059669"/>
    </linearGradient>
    <linearGradient id="tabletGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#f59e0b"/>
      <stop offset="100%" style="stop-color:#d97706"/>
    </linearGradient>
    <filter id="glow" x="-50%" y="-50%" width="200%" height="200%">
      <feGaussianBlur stdDeviation="3" result="coloredBlur"/>
      <feMerge>
        <feMergeNode in="coloredBlur"/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>
    <filter id="shadowSmall" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="1" dy="2" stdDeviation="2" flood-opacity="0.15"/>
    </filter>
  </defs>
  
  <!-- Background -->
  <rect width="900" height="550" fill="#fafafa"/>
  
  <!-- Title -->
  <text x="450" y="30" text-anchor="middle" font-family="system-ui, sans-serif" font-size="18" font-weight="600" fill="#1f2937">Qdrant's Solution: Pre-Built Category Subgraphs</text>
  
  <!-- STEP 1: Build Subgraphs -->
  <g transform="translate(30, 50)">
    <text x="200" y="15" text-anchor="middle" font-family="system-ui, sans-serif" font-size="14" font-weight="600" fill="#374151">Step 1: Build Separate Subgraphs for Each Category</text>
    
    <!-- Laptop Subgraph -->
    <g transform="translate(0, 30)">
      <rect x="0" y="0" width="130" height="120" rx="8" fill="#eff6ff" stroke="#bfdbfe"/>
      <text x="65" y="18" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" font-weight="500" fill="#2563eb">Laptop Subgraph</text>
      
      <!-- Laptop subgraph edges -->
      <line x1="40" y1="55" x2="90" y2="55" stroke="#3b82f6" stroke-width="2.5"/>
      <line x1="40" y1="55" x2="65" y2="95" stroke="#3b82f6" stroke-width="2.5"/>
      <line x1="90" y1="55" x2="65" y2="95" stroke="#3b82f6" stroke-width="2.5"/>
      
      <circle cx="40" cy="55" r="14" fill="url(#laptopGrad)" filter="url(#shadowSmall)"/>
      <text x="40" y="59" text-anchor="middle" font-family="system-ui, sans-serif" font-size="9" font-weight="600" fill="white">A</text>
      <circle cx="90" cy="55" r="14" fill="url(#laptopGrad)" filter="url(#shadowSmall)"/>
      <text x="90" y="59" text-anchor="middle" font-family="system-ui, sans-serif" font-size="9" font-weight="600" fill="white">C</text>
      <circle cx="65" cy="95" r="14" fill="url(#laptopGrad)" filter="url(#shadowSmall)"/>
      <text x="65" y="99" text-anchor="middle" font-family="system-ui, sans-serif" font-size="9" font-weight="600" fill="white">F</text>
    </g>
    
    <!-- Phone Subgraph -->
    <g transform="translate(145, 30)">
      <rect x="0" y="0" width="130" height="120" rx="8" fill="#ecfdf5" stroke="#a7f3d0"/>
      <text x="65" y="18" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" font-weight="500" fill="#059669">Phone Subgraph</text>
      
      <line x1="40" y1="55" x2="90" y2="55" stroke="#10b981" stroke-width="2.5"/>
      <line x1="40" y1="55" x2="65" y2="95" stroke="#10b981" stroke-width="2.5"/>
      <line x1="90" y1="55" x2="65" y2="95" stroke="#10b981" stroke-width="2.5"/>
      
      <circle cx="40" cy="55" r="14" fill="url(#phoneGrad)" filter="url(#shadowSmall)"/>
      <text x="40" y="59" text-anchor="middle" font-family="system-ui, sans-serif" font-size="9" font-weight="600" fill="white">B</text>
      <circle cx="90" cy="55" r="14" fill="url(#phoneGrad)" filter="url(#shadowSmall)"/>
      <text x="90" y="59" text-anchor="middle" font-family="system-ui, sans-serif" font-size="9" font-weight="600" fill="white">D</text>
      <circle cx="65" cy="95" r="14" fill="url(#phoneGrad)" filter="url(#shadowSmall)"/>
      <text x="65" y="99" text-anchor="middle" font-family="system-ui, sans-serif" font-size="9" font-weight="600" fill="white">G</text>
    </g>
    
    <!-- Tablet Subgraph -->
    <g transform="translate(290, 30)">
      <rect x="0" y="0" width="130" height="120" rx="8" fill="#fffbeb" stroke="#fde68a"/>
      <text x="65" y="18" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" font-weight="500" fill="#d97706">Tablet Subgraph</text>
      
      <line x1="40" y1="55" x2="90" y2="55" stroke="#f59e0b" stroke-width="2.5"/>
      <line x1="40" y1="55" x2="65" y2="95" stroke="#f59e0b" stroke-width="2.5"/>
      <line x1="90" y1="55" x2="65" y2="95" stroke="#f59e0b" stroke-width="2.5"/>
      
      <circle cx="40" cy="55" r="14" fill="url(#tabletGrad)" filter="url(#shadowSmall)"/>
      <text x="40" y="59" text-anchor="middle" font-family="system-ui, sans-serif" font-size="9" font-weight="600" fill="white">E</text>
      <circle cx="90" cy="55" r="14" fill="url(#tabletGrad)" filter="url(#shadowSmall)"/>
      <text x="90" y="59" text-anchor="middle" font-family="system-ui, sans-serif" font-size="9" font-weight="600" fill="white">H</text>
      <circle cx="65" cy="95" r="14" fill="url(#tabletGrad)" filter="url(#shadowSmall)"/>
      <text x="65" y="99" text-anchor="middle" font-family="system-ui, sans-serif" font-size="9" font-weight="600" fill="white">I</text>
    </g>
  </g>
  
  <!-- Arrow down -->
  <path d="M230 210 L230 240" stroke="#9ca3af" stroke-width="2" marker-end="url(#downArrow)"/>
  <defs>
    <marker id="downArrow" markerWidth="10" markerHeight="7" refX="5" refY="7" orient="auto">
      <polygon points="0 0, 10 0, 5 7" fill="#9ca3af"/>
    </marker>
  </defs>
  <text x="230" y="230" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" fill="#6b7280" dx="45">Merge edges</text>
  
  <!-- STEP 2: Merged Graph -->
  <g transform="translate(30, 260)">
    <text x="200" y="15" text-anchor="middle" font-family="system-ui, sans-serif" font-size="14" font-weight="600" fill="#374151">Step 2: Merge All Edges into Main HNSW Graph</text>
    
    <rect x="0" y="25" width="420" height="180" rx="10" fill="white" stroke="#e5e7eb" stroke-width="2"/>
    
    <!-- Original HNSW edges (gray, thin) -->
    <g stroke="#d1d5db" stroke-width="1.5" opacity="0.6">
      <line x1="60" y1="80" x2="130" y2="80"/>
      <line x1="130" y1="80" x2="200" y2="80"/>
      <line x1="200" y1="80" x2="270" y2="80"/>
      <line x1="270" y1="80" x2="340" y2="80"/>
      <line x1="60" y1="80" x2="95" y2="150"/>
      <line x1="130" y1="80" x2="165" y2="150"/>
      <line x1="200" y1="80" x2="235" y2="150"/>
      <line x1="270" y1="80" x2="305" y2="150"/>
      <line x1="340" y1="80" x2="305" y2="150"/>
      <line x1="95" y1="150" x2="165" y2="150"/>
      <line x1="165" y1="150" x2="235" y2="150"/>
      <line x1="235" y1="150" x2="305" y2="150"/>
    </g>
    
    <!-- Category subgraph edges (colored, thicker) -->
    <!-- Laptop edges (blue) -->
    <line x1="60" y1="80" x2="200" y2="80" stroke="#3b82f6" stroke-width="3" stroke-dasharray="6,3"/>
    <line x1="60" y1="80" x2="95" y2="150" stroke="#3b82f6" stroke-width="3" stroke-dasharray="6,3"/>
    <line x1="200" y1="80" x2="95" y2="150" stroke="#3b82f6" stroke-width="3" stroke-dasharray="6,3"/>
    
    <!-- Phone edges (green) -->
    <line x1="130" y1="80" x2="270" y2="80" stroke="#10b981" stroke-width="3" stroke-dasharray="6,3"/>
    <line x1="130" y1="80" x2="165" y2="150" stroke="#10b981" stroke-width="3" stroke-dasharray="6,3"/>
    <line x1="270" y1="80" x2="165" y2="150" stroke="#10b981" stroke-width="3" stroke-dasharray="6,3"/>
    
    <!-- Tablet edges (orange) -->
    <line x1="340" y1="80" x2="235" y2="150" stroke="#f59e0b" stroke-width="3" stroke-dasharray="6,3"/>
    <line x1="340" y1="80" x2="305" y2="150" stroke="#f59e0b" stroke-width="3" stroke-dasharray="6,3"/>
    <line x1="235" y1="150" x2="305" y2="150" stroke="#f59e0b" stroke-width="3" stroke-dasharray="6,3"/>
    
    <!-- Nodes -->
    <circle cx="60" cy="80" r="16" fill="url(#laptopGrad)" filter="url(#shadowSmall)"/>
    <text x="60" y="84" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" font-weight="600" fill="white">A</text>
    
    <circle cx="130" cy="80" r="16" fill="url(#phoneGrad)" filter="url(#shadowSmall)"/>
    <text x="130" y="84" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" font-weight="600" fill="white">B</text>
    
    <circle cx="200" cy="80" r="16" fill="url(#laptopGrad)" filter="url(#shadowSmall)"/>
    <text x="200" y="84" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" font-weight="600" fill="white">C</text>
    
    <circle cx="270" cy="80" r="16" fill="url(#phoneGrad)" filter="url(#shadowSmall)"/>
    <text x="270" y="84" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" font-weight="600" fill="white">D</text>
    
    <circle cx="340" cy="80" r="16" fill="url(#tabletGrad)" filter="url(#shadowSmall)"/>
    <text x="340" y="84" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" font-weight="600" fill="white">E</text>
    
    <circle cx="95" cy="150" r="16" fill="url(#laptopGrad)" filter="url(#shadowSmall)"/>
    <text x="95" y="154" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" font-weight="600" fill="white">F</text>
    
    <circle cx="165" cy="150" r="16" fill="url(#phoneGrad)" filter="url(#shadowSmall)"/>
    <text x="165" y="154" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" font-weight="600" fill="white">G</text>
    
    <circle cx="235" cy="150" r="16" fill="url(#tabletGrad)" filter="url(#shadowSmall)"/>
    <text x="235" y="154" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" font-weight="600" fill="white">H</text>
    
    <circle cx="305" cy="150" r="16" fill="url(#tabletGrad)" filter="url(#shadowSmall)"/>
    <text x="305" y="154" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" font-weight="600" fill="white">I</text>
    
    <!-- Legend -->
    <g transform="translate(20, 170)">
      <line x1="0" y1="0" x2="25" y2="0" stroke="#d1d5db" stroke-width="2"/>
      <text x="30" y="4" font-family="system-ui, sans-serif" font-size="9" fill="#6b7280">Original HNSW</text>
      
      <line x1="130" y1="0" x2="155" y2="0" stroke="#3b82f6" stroke-width="3" stroke-dasharray="4,2"/>
      <text x="160" y="4" font-family="system-ui, sans-serif" font-size="9" fill="#6b7280">Category edges</text>
    </g>
  </g>
  
  <!-- RIGHT SIDE: Result -->
  <g transform="translate(480, 50)">
    <text x="200" y="15" text-anchor="middle" font-family="system-ui, sans-serif" font-size="14" font-weight="600" fill="#059669">Result: Filter Preserves Connectivity!</text>
    
    <rect x="0" y="30" width="400" height="180" rx="10" fill="#f0fdf4" stroke="#86efac" stroke-width="2"/>
    <text x="200" y="55" text-anchor="middle" font-family="system-ui, sans-serif" font-size="12" fill="#166534">Filter: "laptops only"</text>
    
    <!-- Faded non-laptop nodes -->
    <circle cx="150" cy="100" r="16" fill="#e5e7eb" opacity="0.3"/>
    <circle cx="270" cy="100" r="16" fill="#e5e7eb" opacity="0.3"/>
    <circle cx="330" cy="100" r="16" fill="#e5e7eb" opacity="0.3"/>
    <circle cx="180" cy="160" r="16" fill="#e5e7eb" opacity="0.3"/>
    <circle cx="240" cy="160" r="16" fill="#e5e7eb" opacity="0.3"/>
    <circle cx="300" cy="160" r="16" fill="#e5e7eb" opacity="0.3"/>
    
    <!-- Laptop subgraph edges (highlighted) -->
    <line x1="70" y1="100" x2="210" y2="100" stroke="#3b82f6" stroke-width="4" filter="url(#glow)"/>
    <line x1="70" y1="100" x2="110" y2="160" stroke="#3b82f6" stroke-width="4" filter="url(#glow)"/>
    <line x1="210" y1="100" x2="110" y2="160" stroke="#3b82f6" stroke-width="4" filter="url(#glow)"/>
    
    <!-- Laptop nodes -->
    <circle cx="70" cy="100" r="18" fill="url(#laptopGrad)" filter="url(#shadowSmall)"/>
    <text x="70" y="104" text-anchor="middle" font-family="system-ui, sans-serif" font-size="11" font-weight="600" fill="white">A</text>
    
    <circle cx="210" cy="100" r="18" fill="url(#laptopGrad)" filter="url(#shadowSmall)"/>
    <text x="210" y="104" text-anchor="middle" font-family="system-ui, sans-serif" font-size="11" font-weight="600" fill="white">C</text>
    
    <circle cx="110" cy="160" r="18" fill="url(#laptopGrad)" filter="url(#shadowSmall)"/>
    <text x="110" y="164" text-anchor="middle" font-family="system-ui, sans-serif" font-size="11" font-weight="600" fill="white">F</text>
    
    <!-- Success checkmark -->
    <circle cx="320" cy="185" r="20" fill="#059669"/>
    <path d="M310 185 L318 193 L332 179" stroke="white" stroke-width="3" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
    
    <!-- Annotations -->
    <text x="200" y="195" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" fill="#166534">All laptops connected via pre-built edges</text>
  </g>
  
  <!-- Bottom: Key insight box -->
  <g transform="translate(480, 260)">
    <rect x="0" y="0" width="400" height="180" rx="10" fill="white" stroke="#e5e7eb"/>
    <text x="200" y="25" text-anchor="middle" font-family="system-ui, sans-serif" font-size="13" font-weight="600" fill="#374151">Key Insight</text>
    
    <text x="20" y="55" font-family="system-ui, sans-serif" font-size="11" fill="#374151">Without category edges:</text>
    <text x="30" y="75" font-family="system-ui, sans-serif" font-size="10" fill="#6b7280">A → [Phone B] → C (path breaks when B removed)</text>
    
    <text x="20" y="105" font-family="system-ui, sans-serif" font-size="11" fill="#374151">With category edges:</text>
    <text x="30" y="125" font-family="system-ui, sans-serif" font-size="10" fill="#059669">A → C (direct laptop-to-laptop edge)</text>
    
    <rect x="20" y="140" width="360" height="30" rx="4" fill="#f0fdf4"/>
    <text x="200" y="159" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" fill="#166534">✓ Connectivity guaranteed by construction, not by chance</text>
  </g>
  
  <!-- Space overhead note -->
  <g transform="translate(30, 470)">
    <rect x="0" y="0" width="420" height="60" rx="8" fill="#fefce8" stroke="#fef08a"/>
    <text x="210" y="20" text-anchor="middle" font-family="system-ui, sans-serif" font-size="11" font-weight="600" fill="#854d0e">Space Overhead</text>
    <text x="210" y="38" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" fill="#92400e">Total edges: at most 2× (each node gets original edges + category edges)</text>
    <text x="210" y="52" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" fill="#92400e">Overhead is constant regardless of number of categories!</text>
  </g>
</svg>
